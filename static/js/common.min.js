window.onload=function(){let e,t=0,i=0,o=["jpeg","jpg","png","webp"];function n(e){$("html, body").animate({scrollTop:e.offset().top-$("#header").outerHeight()-150},500)}!function(t){let i=new XMLHttpRequest;i.open("GET",t),i.onloadend=function(){4===i.readyState&&200===i.status&&(e=JSON.parse(i.responseText))},i.send()}("./admin-data.json"),$("#login_form").on("submit",(function(t){t.preventDefault();const i=e.email,o=e.pass;let n;if($(this).find("input").not("[type=submit]").each((function(){n=$(this).attr("id"),"pass"===n&&(""!==$(this).val()&&$(this).val()===o?$(this).removeClass("error"):$(this).addClass("error")),"email"===n&&(""==$(this).val()?($(this).addClass("error"),$("#"+n+" ~ .error-mess")[0].textContent="Вкажіть email"):$(this).val().includes("@")?/[а-яА-ЯЪъЫыЭэЁё]/i.test($(this).val())?($(this).addClass("error"),$("#"+n+" ~ .error-mess")[0].textContent="Не можна писати кирилицею"):$(this).val().length>320?($(this).addClass("error"),$("#"+n+" ~ .error-mess")[0].textContent="Не можна бiльше 320 символiв"):M.test($(this).val())&&""!=$(this).val()?$(this).val()!==i?($(this).addClass("error"),$("#"+n+" ~ .error-mess")[0].textContent="Перевірте E-mail"):$(this).removeClass("error"):($(this).addClass("error"),$("#"+n+" ~ .error-mess")[0].textContent="Перевірте E-mail"):($(this).addClass("error"),$("#"+n+" ~ .error-mess")[0].textContent='Пропущено "@"'))})),$("#login_form .error").length)return!1;let a=new FormData(t.target),s={};a.forEach((function(e,t){s[t]=e})),s=JSON.stringify(s),$.ajax({url:"/",type:"POST",data:s,success:function(e){setTimeout(()=>{location.href="user-cabinet-data.html",localStorage.login=!0},1e3)},error:function(e){}})})),$("#signup_form").on("submit",(function(e){let t;if(e.preventDefault(),$(this).find("input").not("[type=submit]").each((function(){t=$(this).attr("id");let e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;"name"===t&&(""!==$(this).val()&&$(this).val().length>1?$(this).removeClass("error"):$(this).addClass("error")),"surname"===t&&(""!==$(this).val()&&$(this).val().length>1?$(this).removeClass("error"):$(this).addClass("error")),"pass"===t&&(""===$(this).val()?($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Перевірте пароль"):$(this).val().length<=3?($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Вкажіть бiльше 3 символiв"):$(this).removeClass("error")),"email"===t&&(""==$(this).val()?($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Вкажіть email"):$(this).val().includes("@")?/[а-яА-ЯЪъЫыЭэЁё]/i.test($(this).val())?($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Не можна писати кирилицею"):$(this).val().length>320?($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Не можна бiльше 320 символiв"):e.test($(this).val())&&""!=$(this).val()?$(this).removeClass("error"):($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Перевірте E-mail"):($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent='Пропущено "@"'))})),$("#signup_form .error").length)return $("html, body").animate({scrollTop:$("#signup_form .error").offset().top-$("#header").outerHeight()-20},300),!1;let i=new FormData(e.target),o={};i.forEach((function(e,t){o[t]=e})),o=JSON.stringify(o),$.ajax({url:"/",type:"POST",data:o,success:function(e){localStorage.login=!0,setTimeout(()=>{location.href="mail_confirmation.html"},1e3)},error:function(e){}})})),$("#forgot_password_form").on("submit",(function(t){t.preventDefault();const i=e.email;let o;if($(this).find("input").not("[type=submit]").each((function(){o=$(this).attr("id");let e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;"email"===o&&(""==$(this).val()?($(this).addClass("error"),$("#"+o+" ~ .error-mess")[0].textContent="Вкажіть email"):$(this).val().includes("@")?/[а-яА-ЯЪъЫыЭэЁё]/i.test($(this).val())?($(this).addClass("error"),$("#"+o+" ~ .error-mess")[0].textContent="Не можна писати кирилицею"):$(this).val().length>320?($(this).addClass("error"),$("#"+o+" ~ .error-mess")[0].textContent="Не можна бiльше 320 символiв"):e.test($(this).val())&&""!=$(this).val()?$(this).val()!==i?($(this).addClass("error"),$("#"+o+" ~ .error-mess")[0].textContent="Перевірте E-mail"):$(this).removeClass("error"):($(this).addClass("error"),$("#"+o+" ~ .error-mess")[0].textContent="Перевірте E-mail"):($(this).addClass("error"),$("#"+o+" ~ .error-mess")[0].textContent='Пропущено "@"'))})),$("#forgot_password_form .error").length)return!1;let n=new FormData(t.target),a={};n.forEach((function(e,t){a[t]=e})),a=JSON.stringify(a),$.ajax({url:"/",type:"POST",data:a,success:function(e){localStorage.login=!0,setTimeout(()=>{$("#forgot_password_form").slideUp()},1e3),setTimeout(()=>{$(".forgot-password-message").slideDown()},1e3)},error:function(e){}})})),$(document).on("mouseup",(function(e){let t=$(".navbar-toggler, .header-nav"),i=$(".btn-search-toggler, .search-wrap"),o=$(".site-dropdown, [data-dropdown-for]"),n=$(".video-wrap, .play-video");t.is(e.target)||0!==t.has(e.target).length||$(".navbar-collapse").collapse("hide"),i.is(e.target)||0!==i.has(e.target).length||$(".search-wrap").removeClass("active"),o.is(e.target)||0!==o.has(e.target).length||$(".site-dropdown").removeClass("active"),n.is(e.target)||0!==n.has(e.target).length||0==$("#video").length||($(".play-video").removeClass("play"),$("#video").get(0).contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"))})),$(".play-video").on("click",(function(e){let t=$("#video").get(0).dataset.videoSrc+"?enablejsapi=1&controls=1";$("#video").get(0).src.includes("&autoplay=1")?this.classList.contains("play")?(this.classList.remove("play"),$("#video").get(0).contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")):(this.classList.add("play"),$("#video").get(0).contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")):($("#video").get(0).src=t+"&autoplay=1&start=0",this.classList.add("play"))}));var a=$(window).scrollTop()+$(window).height();function s(){window.innerWidth<=1199?r(!0):r(!1)}function r(e){!0===e?($("#footer .btn-drop").each((function(){$(this).removeClass("disabled").addClass("collapsed")})),$("#footer .collapse").each((function(){$(this).removeClass("show")}))):($("#footer .btn-drop").each((function(){$(this).addClass("disabled").removeClass("collapsed")})),$("#footer .collapse").each((function(){$(this).addClass("show")})))}function l(){""!=$(".search-input")[0].value?(location.href="search-results.html",localStorage.search_query=$(".search-input")[0].value):(location.href="search-no-results.html",localStorage.search_query="")}function d(e,t,i,o){t.find(".accordion-img").each((function(){$(this)[0].classList.contains("active")?$(this).css({top:"0",[e]:"0","z-index":"0"}):(i+=2,o++,$(this).css({top:i+"0px",[e]:i+"0px","z-index":"-"+o}))})),window.innerWidth<992&&t.find(".accordion-img").each((function(){let e=$(this)[0].dataset.img;$(this).appendTo($(e+" .card-body"))})),window.innerWidth>992&&0!=$(".card-body .accordion-img").length&&t.find(".accordion-img").each((function(){$(this).appendTo(t.find(".images-wrap"))}))}$("[data-src]").each((function(){a>=$(this).offset().top&&(this.src=this.dataset.src,this.removeAttribute("data-src"))})),$(window).on("scroll",(function(){var e=$(this).scrollTop()+$(this).height();$("[data-src]").each((function(){e>=$(this).offset().top&&(this.src=this.dataset.src,this.removeAttribute("data-src"))}))})),$(".about-memorial").each((function(){if($(this).outerHeight()>130){$(this)[0].classList.add("excerpt-text","close");let e=document.createElement("button");e.classList.add("btn-excerpt"),e.innerHTML+='<span>Читати повністю</span><svg class="icon-brecket" width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 1.2403L8.77007 0L5 3.55414L1.22993 0L0 1.2403L5 6L10 1.2403Z" fill="currentColor"></path></svg>',$(this)[0].appendChild(e)}})),$(".about-memorial .btn-excerpt").on("click",(function(e){$(this)[0].parentNode.classList.contains("close")?$(this).children("span").text("Згорнути текст"):$(this).children("span").text("Читати повністю"),$(this)[0].classList.toggle("open"),$(this)[0].parentNode.classList.toggle("close")})),$(".btn-copy").on("click",(function(){const e=this.parentNode.querySelector(".copy-data").innerText;navigator.clipboard.writeText(e),this.dataset.title="Скопійовано: "+e,setTimeout(function(){this.dataset.title="Копіювати"}.bind(this),3e3)})),$("[data-news-copy]")[0]&&($("[data-news-copy]")[0].dataset.newsCopy=window.location.href),$(".share-links-modal .more-item")&&$(".share-links-modal .more-item").on("click",(function(){this.classList.toggle("more-item")})),$("[data-news-copy]").on("click",(function(){navigator.clipboard.writeText(this.dataset.newsCopy),this.dataset.title="Скопійовано посилання на цю сторінку",setTimeout(function(){this.dataset.title="Копіювати"}.bind(this),3e3)})),$(".btn-copy").on("click",(function(){const e=this.parentNode.querySelector(".copy-data").innerText;navigator.clipboard.writeText(e),this.dataset.title="Скопійовано: "+e,setTimeout(function(){this.dataset.title="Копіювати"}.bind(this),3e3)})),$("[href^=#pills]").on("click",(function(){$("[href^=#pills]").each((function(){this.style.pointerEvents="none"})),setTimeout(()=>{$("[href^=#pills]").each((function(){this.style.pointerEvents="auto"}))},500)})),window.addEventListener("resize",(function(){s()})),s(),$("a").each((function(){this.href===window.location.href&&this.classList.add("active")})),$("#search_btn").on("click",(function(){l()})),""!==localStorage.search_query&&0!==$(".search-results").length&&($("#search_input")[0].value=localStorage.search_query,$("#search_query")[0].textContent='"'+localStorage.search_query+'"'),$(".btn-search-toggler").on("click",(function(){$(".search-wrap")[0].classList.toggle("active")})),$(".search-input").on("input focus",(function(){""!==$(this).val()?$(".btn-search-reset").removeClass("hide")&&$(this).on("keypress",(function(e){"Enter"===e.key&&(e.preventDefault(),l())})):$(".btn-search-reset").addClass("hide")})),$(".btn-search-reset").on("click",(function(){$(".search-input").val(""),$(this).addClass("hide")})),$(".site-dropdown-options").on("click",(function(){const e=$(".search-sort-container")[0];let t=this.dataset.sort;switch(t){case"surname":e.dataset.sortType=t,e.style.flexDirection="column";break;case"name":e.dataset.sortType=t,e.style.flexDirection="column-reverse";break;case"patronymic":e.dataset.sortType=t,e.style.flexDirection="column";break;case"date":e.dataset.sortType=t,e.style.flexDirection="column-reverse"}})),$(".accordion-images-wrap").each((function(){let e=$(this),t=e.hasClass("revers-type")?"right":"left";e.find('[data-target^="#"]').on("click",(function(){let i=this.dataset.target;e.find(".accordion-img").each((function(){i!==$(this)[0].dataset.img||$(this)[0].classList.contains("active")||(e.find(".accordion-img.active")[0].classList.remove("active"),$(this)[0].classList.add("active")),d(t,e,0,0)})),window.innerWidth<992&&($(".btn-accordion").not(this).each((function(){"BUTTON"===this.tagName&&this.classList.add("collapsed")})),$(".site-accordion .collapse").each((function(){"#"+this.id!==i&&this.classList.remove("show")})),setTimeout(function(){let t=$('button[data-target="'+this.dataset.target+'"]').offset().top-$("#header").outerHeight()-20;0===e.find(".collapse.show").length?$("html, body").animate({scrollTop:$(".accordion-images-wrap").offset().top-$("#header").outerHeight()-20},300):$("html, body").animate({scrollTop:t},300)}.bind(this),500))})),d(t,e,0,0)})),window.innerWidth>992&&0!==$("#accordionCapabilities_2").length&&($("#accordionCapabilities_2 .btn-accordion")[0].classList.remove("collapsed"),$("#accordionCapabilities_2 .btn-accordion")[0].setAttribute("aria-expanded","true"),$("#accordionCapabilities_2 .collapse")[0].classList.add("show")),$(window).on("resize",(function(){0!==$(".accordion-images-wrap").length&&$(".accordion-images-wrap").each((function(){let e=$(this);d(e.hasClass("revers-type")?"right":"left",e,0,0)}))})),$(".steps-wrap").slick({dots:!0,infinite:!1,arrows:!1,slidesToShow:4,appendDots:".steps-wrap",responsive:[{breakpoint:992,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]}),$("[data-dropdown-for]").on("click",(function(){$('[data-dropdown-id="'+this.dataset.dropdownFor+'"]').toggleClass("active").addClass("in-active")})),$(".site-dropdown").on("click",(function(e){$(".site-dropdown.active").not($(this)).removeClass("active in-active"),$(this).toggleClass("active").addClass("in-active");let t=$(this).find(".select-sort"),i=$(this).find(".site-dropdown-options:not(.dis)"),o=0!==$(this).find("input.select-dropdown").length?$(this).find(".select-dropdown"):$(this).find(".select-dropdown option");if(i.is(e.target)){let n=e.target.dataset.val||$(e.target).text(),a=$(e.target).text();t.text(a),o.val(n).trigger("change"),i.each((function(){$(this).removeClass("curent")})),$(this).find(".error").removeClass("error"),$(e.target).addClass("curent")}})),document.location.href.indexOf("#gallery")>=1&&$(".fancybox__button--close").trigger("click"),Fancybox.bind('[data-fancybox="gallery"]',{click:!1,dragToClose:!1,Image:{zoom:!0,fit:"cover",click:!1,wheel:"slide"},Toolbar:{display:[{id:"counter"},"close"]},on:{initLayout:function(e){const t=document.createElement("div");for(t.classList.add("fancybox__leftCol");e.$container.firstChild;)t.appendChild(e.$container.firstChild);const i=document.createElement("div");i.classList.add("fancybox__rightCol");const o=document.createElement("div");i.appendChild(o),e.$comments=o,e.$container.appendChild(e.$backdrop),e.$container.appendChild(t),e.$container.appendChild(i),e.$leftCol=t,e.$rightCol=i},"Carousel.ready Carousel.change":function(e,t,i){i=void 0===i?t.options.initialPage:i;const o=e.items[i].$trigger.querySelector(".sidebar-img-comments").innerHTML||"";e.$comments.innerHTML=o,$(".fancybox__container").addClass("active memorial-gallery"),$(".form-comments-to-foto").each((function(){$(this).on("submit",(function(e){e.preventDefault()}))}))}}}),$(".btn-goto-add-gift").on("click",(function(){$("html, body").animate({scrollTop:$(".memorial-sidebar .btn-add-gift").offset().top-$("#header").outerHeight()-150},500)}));let c=0;function m(e){let t=new Image;return t.src=e,t}$("#giftsModal .gift-img").on("click",(function(){let e=document.createElement("div"),t=$(this).children("img")[0].src;0===$(".memorial-sidebar .gift-no").length&3===$(".memorial-sidebar .gift-img").length&&$(".memorial-sidebar .gift-img")[2].remove(),e.classList.add("gift-img"),e.append(m(t)),$(".memorial-sidebar .gifts-wrap").prepend(e),$(".memorial-header .gift-wrap").html(m(t)),$(".memorial-sidebar .gift-no").length&&$(".memorial-sidebar .gift-no")[0].remove(),$("#giftsModal").modal("hide"),c++,$("#gifts-count")[0].dataset.giftsCount=c})),$(".post-slider").slick({dots:!1,infinite:!1,arrows:!0,slidesToShow:3,prevArrow:'<div class="post-slider-prev"><svg width="30" height="12" viewBox="0 0 30 12" fill="none" xmlns="http://www.w3.org/2000/svg" ><path d="M5.48611 11.4038C5.6438 11.4038 5.8015 11.3442 5.92073 11.2231C6.16111 10.9827 6.16111 10.5923 5.92073 10.3519L1.12843 5.55962C0.888049 5.31924 0.497668 5.31924 0.257284 5.55962C0.0169001 5.80001 0.0169001 6.19039 0.257284 6.43077L5.04957 11.2231C5.17073 11.3442 5.32842 11.4038 5.48611 11.4038Z" fill="#323232"/><path d="M0.693782 6.61154H29.3092C29.6496 6.61154 29.9246 6.33654 29.9246 5.99615C29.9246 5.65577 29.6496 5.38077 29.3092 5.38077H2.18032L5.91494 1.64615C6.15532 1.40577 6.15532 1.01538 5.91494 0.775C5.67455 0.534615 5.28417 0.534615 5.04378 0.775L0.257244 5.56154C0.0803209 5.73846 0.0283974 6.00192 0.124551 6.23269C0.220705 6.46154 0.445705 6.61154 0.693782 6.61154V6.61154Z" fill="#323232"/></svg></div >',nextArrow:'<div class="post-slider-next"><svg width="30" height="12" viewBox="0 0 30 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24.5154 11.4038C24.3577 11.4038 24.2 11.3442 24.0807 11.2231C23.8404 10.9827 23.8404 10.5923 24.0807 10.3519L28.873 5.55962C29.1134 5.31924 29.5038 5.31924 29.7442 5.55962C29.9846 5.80001 29.9846 6.19039 29.7442 6.43077L24.9519 11.2231C24.8307 11.3442 24.673 11.4038 24.5154 11.4038Z" fill="#323232"/><path d="M29.3077 6.61154H0.692289C0.351904 6.61154 0.0769043 6.33654 0.0769043 5.99615C0.0769043 5.65577 0.351904 5.38077 0.692289 5.38077H27.8211L24.0865 1.64615C23.8461 1.40577 23.8461 1.01538 24.0865 0.775C24.3269 0.534615 24.7173 0.534615 24.9577 0.775L29.7442 5.56154C29.9211 5.73846 29.9731 6.00192 29.8769 6.23269C29.7808 6.46154 29.5558 6.61154 29.3077 6.61154V6.61154Z" fill="#323232"/></svg></div>',appendArrows:".post-slider-wrap",responsive:[{breakpoint:992,settings:{slidesToShow:2,arrows:!1,dots:!0,appendDots:".post-slider-dots",asNavFor:".post-slider-dots .slick-dots"}},{breakpoint:768,settings:{arrows:!1,dots:!0,slidesToShow:1,appendDots:".post-slider-dots",asNavFor:".post-slider-dots .slick-dots"}}]}),$(".post-slider-dots .slick-dots").slick({dots:!1,infinite:!1,arrows:!1,slidesToShow:4,slidesToScroll:1,asNavFor:".post-slider",centerMode:!0}),document.location.href.indexOf("#post-gallery")>=1&&$(".fancybox__button--close").trigger("click"),Fancybox.bind('[data-fancybox="post-gallery_1"], [data-fancybox="post-gallery_2"]',{Image:{zoom:!0},Thumbs:{autoStart:!1},Toolbar:{display:[{id:"counter"},"close"]}});const h=window.innerWidth>768?160:150;function u(){let e={};for(let i=0;i<$(".comments-user-wrap .comment-body").length;i++){function t(){if(e[i]>h){$(this)[0].classList.add("excerpt-text","close"),$(this).find(".comment-wrap").css("max-height",h);const e=document.createElement("div");e.classList.add("overlay");const t=document.createElement("button");t.classList.add("btn-excerpt"),t.innerHTML+='<svg class="icon-doble-brecket" width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 9.44134L13.9051 8.46143L7.5 14.2429L1.09489 8.46143L0 9.44134L7.5 16.1537L15 9.44134Z" fill="#323232" fill-opacity="0.8"/><path d="M15 4.8261L13.9051 3.84619L7.5 9.62768L1.09489 3.84619L0 4.8261L7.5 11.5385L15 4.8261Z" fill="#323232" fill-opacity="0.8"/></svg>',$(this)[0].querySelector(".comment-wrap").appendChild(e),$(this)[0].querySelector(".comment-wrap").insertAdjacentElement("afterend",t)}null!=$(this).find(".btn-excerpt")[0]&&$(this).find(".btn-excerpt")[0].addEventListener("click",(function(){$(this).parent()[0].classList.contains("close")?$(this).parent().find(".comment-wrap").css("max-height",e[i]):$(this).parent().find(".comment-wrap").css("max-height",h),$(this).parent()[0].classList.toggle("close"),$(this)[0].classList.toggle("active")}))}e[i]=$(".comments-user-wrap .comment-wrap")[i].clientHeight,t.call($(".comments-user-wrap .comment-body")[i])}}let f={},p=$(".comments-user-wrap .child-comments-block").length;0===p&&u();for(let e=0;e<p;e++){function g(){if(f[e]>h){$(this)[0].classList.add("excerpt-text","close"),$(this).find(".comment-text").css("max-height",h);const e=document.createElement("div");e.classList.add("overlay");const t=document.createElement("button");t.classList.add("btn-excerpt"),t.innerHTML+='<svg class="icon-doble-brecket" width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 9.44134L13.9051 8.46143L7.5 14.2429L1.09489 8.46143L0 9.44134L7.5 16.1537L15 9.44134Z" fill="#323232" fill-opacity="0.8"/><path d="M15 4.8261L13.9051 3.84619L7.5 9.62768L1.09489 3.84619L0 4.8261L7.5 11.5385L15 4.8261Z" fill="#323232" fill-opacity="0.8"/></svg>',$(this)[0].querySelector(".comment-text").appendChild(e),$(this)[0].querySelector(".comment-text").insertAdjacentElement("afterend",t)}null!=$(this).find(".btn-excerpt")[0]&&$(this).find(".btn-excerpt")[0].addEventListener("click",(function(){$(this).parent()[0].classList.contains("close")?$(this).parent().find(".comment-text").css("max-height",f[e]):$(this).parent().find(".comment-text").css("max-height",h),$(this).parent()[0].classList.toggle("close"),$(this)[0].classList.toggle("active")}))}f[e]=$(".comments-user-wrap .child-comments-block")[e].clientHeight,g.call($(".comments-user-wrap .child-comments-block")[e]),e==$(".comments-user-wrap .child-comments-block").length-1&&u()}function v(){$("[data-title]").each((function(){let e=this.getBoundingClientRect(),t=window.innerWidth-e.right;e.x<100?(this.classList.remove("right"),this.classList.add("left")):this.classList.remove("left"),t<100?(this.classList.remove("left"),this.classList.add("right")):this.classList.remove("right")}))}v(),$(window).on("click",(function(){setTimeout(()=>{v()},500)})),$(".btn-lock").on("click",(function(e){e.preventDefault()})),$("a:not(.fancybox) button").on("click",(function(e){e.preventDefault()})),$("[data-favorite]").on("click",(function(e){"remove-from-favorite"===$(this)[0].getAttribute("data-favorite")?(this.setAttribute("data-favorite","add-to-favorite"),this.setAttribute("data-title","Додати в Обрані Меморіали")):(this.setAttribute("data-favorite","remove-from-favorite"),this.setAttribute("data-title","Видалити з Обраного"))})),$("a.btn-circle").blur(),$("a.btn-circle").on("click",(function(e){e.preventDefault();let t=1e3*parseFloat(window.getComputedStyle(this).transitionDuration);setTimeout(()=>{window.location=this.href},t)}));const _=$("#user_cabinet_menu");function b(e,t){if(e.length&&t.length){let i="https://raw.githubusercontent.com/David-Haim/CountriesToCitiesJSON/master/countriesToCities.json",o=new XMLHttpRequest;o.open("GET",i,!0),o.responseType="json",o.send(),o.onload=function(){let t=o.response,i=Object.keys(t);i.sort(),i.forEach((function(t){if(0!==t.length){let i=document.createElement("li");i.classList.add("site-dropdown-options"),i.innerHTML=t,e.append(i)}}))},$(e)[0].parentNode.querySelector(".select-dropdown").change=function(){const e=this.value;o.open("GET",i,!0),o.responseType="json",o.send(),o.onload=function(){o.response[e].sort().forEach((function(e){$(t).empty(),setTimeout((function(){let i=document.createElement("li");i.classList.add("site-dropdown-options"),i.innerHTML=e,t.append(i)}),100)}))}}}}function w(e,t){$(e)[0]&&($(e)[0].onfocus=function(){this.click(),this.blur()},$(e)[0].onclick=function(){this.blur()}),pickmeup($(e)[0],{locale:"uk",format:"m.d.Y",position:"bottom",first_day:1,hide_on_select:!0,prev:"&#x276E;",next:"&#x276F;",default_date:!1,max:"today",min:t}),$(".pickmeup").each((function(){$(this).css("width",this.__pickmeup_target.offsetWidth)})),$(e).on("click",(function(){$(".pickmeup").each((function(){$(this).css("width",this.__pickmeup_target.offsetWidth)})),"birth_day"===this.id&&($("#death_day")[0].value=""),pickmeup($(e)[0]).update()}))}$(".btn-back-to-menu").on("click",(function(e){e.preventDefault(),_.addClass("active")})),_.find(".active").on("click",(function(e){e.preventDefault(),_.removeClass("active")})),$("#delete_accout").on("click",(function(){$("#delAccModal").modal("show")})),$(".user-cabinet-content .card-header").on("click",(function(){setTimeout(()=>{$("html, body").animate({scrollTop:$(this).offset().top-$("#header").outerHeight()-20},300)},500)})),b($("#country"),$("#city")),b($("#burial_countries_list"),$("#burial_cities_list")),pickmeup.defaults.locales.uk={days:["Неділя","Понеділок","Вівторок","Середа","Четвер","П`ятниця","Субота"],daysShort:["Нед","Пон","Вів","Сер","Чет","Птн","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthsShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"]},w("#birth_day"),$("#death_day").on("click",(function(){let e=$("#birth_day")[0].value;if(""===e)return $(this)[0].blur(),$("#birth_day")[0].focus(),$("#birth_day")[0].click(),!1;pickmeup($("#death_day")[0]).destroy(),w("#death_day",e),pickmeup($("#death_day")[0]).update()})),w("#memorable_event_date_day");let y,C="",x=$("#user_data_form .select-img img").length?$("#user_data_form .select-img img")[0].src:"",M=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;const L=$("#user_data_form"),T=$("#user_last_name"),k=$("#user_name"),H=$("#user_surname"),S=$("#user_email");function E(){C="",$("#user_data_form input").each((function(){C+=this.value}))}function A(){y="",$("#user_data_form input").each((function(){y+=this.value})),C!==y||C.length!==y.length?L[0].dataset.change=!0:L[0].dataset.change=!1}function D(){"user_email"===this.id&&(this.nextElementSibling.textContent=this.value)}E(),D.call(S[0]),$("#load_user_img").on("change",(function(){if(this.files&&this.files[0]){let e=this.files[0],n=(this.files[0].size/1048576).toFixed(2),a=this.files[0].name.split(".").pop(),s=!1,r=window.URL||window.webkitURL,l=new Image,d=new FileReader;if(!o.includes(a))return $("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+a+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),s=!1,$("#comment_add_foto").val(""),!1;l.onload=function(){t=this.width,i=this.height,t<150||i<150?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Занадто маленьке зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Miнiмальний розмiр (150px x 150px)",s=!1,$("#comment_add_foto").val("")):t>1e3||i>1e3?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр (1000px x 1000px)",s=!1,$("#comment_add_foto").val("")):n>1?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення - "+n+"мб",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр - <b>1мб</b>",s=!1,$("#comment_add_foto").val("")):o.includes(a)?s=!0:($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+a+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),s=!1,$("#comment_add_foto").val("")),s&&(d.onload=function(e){x=e.target.result,$("#user_data_form .select-img img")[0].src=x},d.readAsDataURL(e),A())},l.src=r.createObjectURL(this.files[0])}})),$("#del_user_img").on("click",(function(e){$("#user_data_form .select-img img")[0].src=this.dataset.resetImg,x=this.dataset.resetImg,$("#load_user_img")[0].value="",$("#load_user_img")[0].setAttribute("value",""),A()})),$("#user_data_form input").on("keyup",(function(e){e.preventDefault(),"user_email"===this.id&&D.call(S[0]),A()})),$("#btn_edit_user_data").on("click",(function(e){const t=e;if(e.target.textContent="Зберегти","true"===e.target.form.getAttribute("disabled"))e.target.form.setAttribute("disabled","false");else{if(""==T[0].value&&(T.addClass("error"),$("#"+T[0].id+" ~ .error-mess")[0].textContent="Додайте інформацію"),1===T[0].value.length&&(T.addClass("error"),$("#"+T[0].id+" ~ .error-mess")[0].textContent="Не меньше двох символiв"),""==k[0].value&&(k.addClass("error"),$("#"+k[0].id+" ~ .error-mess")[0].textContent="Додайте інформацію"),1===k[0].value.length&&(k.addClass("error"),$("#"+k[0].id+" ~ .error-mess")[0].textContent="Не меньше двох символiв"),1===H[0].value.length&&(H.addClass("error"),$("#"+H[0].id+" ~ .error-mess")[0].textContent="Не меньше двох символiв"),""==S[0].value&&(S.addClass("error"),$("#"+S[0].id+" ~ .error-mess")[0].textContent="Вкажiть ваш Email"),!M.test(S[0].value)){let e=S[0].value.includes(" ")?" (видаліть пробіли)":"";S.addClass("error"),$("#"+S[0].id+" ~ .error-mess")[0].textContent="Перевірте E-mail"+e}if($("#user_data_form .error").length)return!1;setTimeout(()=>{$("#load_user_img")[0].dataset.oldValue=x,L[0].setAttribute("disabled","true"),L[0].dataset.change=!1,t.target.textContent="Редагувати",E(),$("#user_data_form input").each((function(){this.setAttribute("value",this.value)}))},10)}})),$("#btn_reset_user_data_form").on("click",(function(e){e.target.form.reset(),$("#user_data_form .select-img img")[0].src=$("#load_user_img")[0].dataset.oldValue,D.call(S[0]),e.target.form.dataset.change=!1,e.target.form.setAttribute("disabled","true"),$("#btn_edit_user_data")[0].textContent="Редагувати"})),L.on("submit",(function(e){e.preventDefault()})),$("#change_pass").on("click",(function(e){$(".pass-recovery")[0].hidden=!1,this.form.hidden=!0,n($(".pass-recovery")),setTimeout((function(){$(".icon-for-input").each((function(){$(this).css("top",$(this).next()[0].offsetHeight/2)}))}),100)})),$("#btn_back_to_us_data").on("click",(function(){$(".pass-recovery")[0].hidden=!0,$("#user_data_form")[0].hidden=!1,n($("#user_data_form"))})),$("#pass_recovery").on("submit",(function(t){if(t.preventDefault(),$("#current_pas").val()!==e.pass||""===$("#current_pas").val()?$("#current_pas").addClass("error"):$("#current_pas").removeClass("error"),""===$("#new_pas").val()?($("#new_pas").addClass("error"),$("#new_pas ~ .error-mess")[0].textContent="Вкажіть пароль"):$("#current_pas").val()===$("#new_pas").val()?($("#new_pas").addClass("error"),$("#new_pas ~ .error-mess")[0].textContent="Вказано поточний пароль"):$("#new_pas").removeClass("error"),$("#pass_recovery .error").length)return!1;$("#sucsesModalLabel").text("Пароль змінено"),setTimeout((function(){$("#complainModal").modal("hide"),$("#sucsesModal").modal("show"),$(".pass-recovery")[0].hidden=!0,$("#user_data_form")[0].hidden=!1,setTimeout((function(){$("#sucsesModal").modal("hide")}),5e3)}),1e3)})),$("#btnConfirmDelMemorial").on("click",(function(){$("#delMemorialModal").modal("hide"),$("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerText=this.dataset.confirmText,$("#"+this.dataset.whichDelMemorial).remove()})),$("[data-parent-id-memorial]").on("click",(function(){$("#delMemorialModal").modal("show"),$("#btnConfirmDelMemorial")[0].setAttribute("data-which-del-memorial",this.dataset.parentIdMemorial)}));let q=document.querySelector("#gallery_img");const j=document.querySelector("#gallery_img_imgs_previews"),O=document.getElementById("btn_save_gallery"),R=[];O&&O.addEventListener("click",e=>{R.length}),q&&q.addEventListener("change",(function e(){let n=this;[...q.files].forEach(a=>{const s=new FileReader;s.addEventListener("loadend",()=>{const r=document.createElement("div");r.classList.add("select-img-wrap","square-type");const l=document.createElement("div");l.classList.add("select-img");const d=new Image;d.src=`data:${a.type};base64,${btoa(s.result)}`;let c=(a.size/1048576).toFixed(2),m=a.name.split(".").pop(),h=!1,u=window.URL||window.webkitURL,f=new Image;if(!o.includes(m))return $("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+m+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),h=!1,n.value="",!1;f.onload=function(){if(t=this.width,i=this.height,t<150||i<150?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Занадто маленьке зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Miнiмальний розмiр (150px x 150px)",h=!1,n.value=""):t>1e3||i>1e3?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр (1000px x 1000px)",h=!1,n.value=""):c>1?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення - "+c+"мб",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр - <b>1мб</b>",h=!1,n.value=""):o.includes(m)?h=!0:($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+m+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),h=!1,n.value=""),h){const n=document.createElement("button");n.type="button",n.classList.add("btn-load-select-img","btn-edit"),n.id="btn_edit_gallery_img",n.innerHTML='<svg width = "30" height = "30" viewBox = "0 0 30 30" fill = "none" xmlns = "http://www.w3.org/2000/svg" ><circle cx="15" cy="15" r="15" fill="currentColor"></circle><path class="pen" d="M21.4873 10.987L20.1844 12.2899L17.6714 9.85386L19.0128 8.51249C19.3409 8.18435 19.7859 8 20.25 8C20.7141 8 21.1591 8.18435 21.4873 8.51249C21.8154 8.84062 21.9997 9.28568 21.9997 9.74974C21.9997 10.2138 21.8154 10.6588 21.4873 10.987ZM19.4214 13.052L11.4108 21.0626L8 22.0129L8.93538 18.589L16.9163 10.6081L19.4214 13.052Z"></path></svg>';const c=document.createElement("input");c.type="file",c.id="сhange_image",c.accept="image/jpeg, image/jpg, image/png, image/webp",c.setAttribute("hidden","");const m=document.createElement("button");m.type="button",m.classList.add("btn-del-select-img","btn-delete"),m.innerHTML='<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"></circle><path d="M17.4998 7.5C17.7209 7.5 17.9328 7.5878 18.0891 7.74408C18.2454 7.90036 18.3332 8.11232 18.3332 8.33333H19.9998C20.2209 8.33333 20.4328 8.42113 20.5891 8.57741C20.7454 8.73369 20.8332 8.94565 20.8332 9.16667C20.8332 9.38768 20.7454 9.59964 20.5891 9.75592C20.4328 9.9122 20.2209 10 19.9998 10H9.99984C9.77882 10 9.56686 9.9122 9.41058 9.75592C9.2543 9.59964 9.1665 9.38768 9.1665 9.16667C9.1665 8.94565 9.2543 8.73369 9.41058 8.57741C9.56686 8.42113 9.77882 8.33333 9.99984 8.33333H11.6665C11.6665 8.11232 11.7543 7.90036 11.9106 7.74408C12.0669 7.5878 12.2788 7.5 12.4998 7.5H17.4998Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10 10.8334H20V20.8334C20 21.2754 19.8244 21.6993 19.5118 22.0119C19.1993 22.3244 18.7754 22.5 18.3333 22.5H11.6667C11.2246 22.5 10.8007 22.3244 10.4882 22.0119C10.1756 21.6993 10 21.2754 10 20.8334V10.8334ZM12.9167 12.5C12.8062 12.5 12.7002 12.5439 12.622 12.6221C12.5439 12.7002 12.5 12.8062 12.5 12.9167V20.4167C12.5 20.5272 12.5439 20.6332 12.622 20.7113C12.7002 20.7895 12.8062 20.8334 12.9167 20.8334C13.0272 20.8334 13.1332 20.7895 13.2113 20.7113C13.2894 20.6332 13.3333 20.5272 13.3333 20.4167V12.9167C13.3333 12.8062 13.2894 12.7002 13.2113 12.6221C13.1332 12.5439 13.0272 12.5 12.9167 12.5ZM17.0833 12.5C16.9728 12.5 16.8668 12.5439 16.7887 12.6221C16.7106 12.7002 16.6667 12.8062 16.6667 12.9167V20.4167C16.6667 20.5272 16.7106 20.6332 16.7887 20.7113C16.8668 20.7895 16.9728 20.8334 17.0833 20.8334C17.1938 20.8334 17.2998 20.7895 17.378 20.7113C17.4561 20.6332 17.5 20.5272 17.5 20.4167V12.9167C17.5 12.8062 17.4561 12.7002 17.378 12.6221C17.2998 12.5439 17.1938 12.5 17.0833 12.5Z" fill="currentColor"></path></svg>';const h=document.createElement("textarea");h.name="gallery_descr_text",h.id="gallery_descr_text",h.placeholder="Напишіть текст",h.setAttribute("maxlength","1000");const u=document.createElement("span");u.classList.add("textarea-maxlength"),u.innerText="0/1000";let f={name:a.name,modified:a.lastModified,size:a.size,data:s.result,description:""};R.push(f),n.addEventListener("click",(function(){let e=$("#galleryDescrModal");e.modal("show"),e[0].querySelector("img").setAttribute("src",this.parentNode.querySelector("img").src),e[0].querySelector("#gallery_descr_text").replaceWith(h),e[0].querySelector("#gallery_descr_text").value=R[R.indexOf(f)].description,e[0].querySelector("#сhange_image").replaceWith(c),e[0].querySelector(".textarea-maxlength").replaceWith(u)})),c.addEventListener("change",(function(){if(this.files&&this.files[0]){let n=this,a=this.files[0],l=(this.files[0].size/1048576).toFixed(2),d=this.files[0].name.split(".").pop(),m=!1,h=window.URL||window.webkitURL,u=new Image,p=new FileReader;if(!o.includes(d))return $("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+d+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),m=!1,n.value="",!1;u.onload=function(){t=this.width,i=this.height,t<150||i<150?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Занадто маленьке зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Miнiмальний розмiр (150px x 150px)",m=!1,n.value=""):t>1e3||i>1e3?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр (1000px x 1000px)",m=!1,n.value=""):l>1?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення - "+l+"мб",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр - <b>1мб</b>",m=!1,n.value=""):o.includes(d)?m=!0:($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+d+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),m=!1,n.value=""),m&&(p.onload=function(t){$("#galleryDescrModal")[0].querySelector("img").setAttribute("src",t.target.result),$(r)[0].querySelector("img").src=t.target.result,[...c.files].forEach(e=>{R[R.indexOf(f)].name=e.name,R[R.indexOf(f)].modified=e.lastModified,R[R.indexOf(f)].size=e.size,R[R.indexOf(f)].data=s.result}),setTimeout(()=>{e()},100)},p.readAsDataURL(a))},u.src=h.createObjectURL(this.files[0])}})),h.addEventListener("focus",(function(){$(this).next(".textarea-maxlength").text($(this).val().length+"/"+$(this)[0].getAttribute("maxlength")),Y()})),h.addEventListener("input",(function(){R[R.indexOf(f)].description=this.value})),$("#gallery_descr_form").on("submit",(function(t){t.preventDefault(),$("#galleryDescrModal").modal("hide"),e()})),m.addEventListener("click",t=>{t.preventDefault(),R.splice(R.indexOf(f),1),r.classList.add("removing"),setTimeout((function(){r.remove()}),100),setTimeout((function(){e()}),100)}),r.appendChild(m),r.appendChild(n),l.appendChild(d),r.appendChild(l),j.appendChild(r)}},f.src=u.createObjectURL(a)}),s.readAsBinaryString(a)}),q.value="";const a=q.cloneNode(!0);return q.replaceWith(a),q=a,void q.addEventListener("change",e)})),$("#btn_add_gallery_video").on("click",(function(){$("#galleryVideoModal").modal("show")})),$(".btn-del-select-video").on("click",(function(){this.parentElement.remove()})),$("#gallery_video_form").on("submit",(function(e){e.preventDefault();const t=this.input_gallery_video;if(t.value.length){t.classList.remove("error");let e=document.createElement("div");e.classList.add("iframe-wrap");const i=document.createElement("button");i.type="button",i.classList.add("btn-load-select-video","btn-edit"),i.innerHTML='<svg width = "30" height = "30" viewBox = "0 0 30 30" fill = "none" xmlns = "http://www.w3.org/2000/svg" ><circle cx="15" cy="15" r="15" fill="currentColor"></circle><path class="pen" d="M21.4873 10.987L20.1844 12.2899L17.6714 9.85386L19.0128 8.51249C19.3409 8.18435 19.7859 8 20.25 8C20.7141 8 21.1591 8.18435 21.4873 8.51249C21.8154 8.84062 21.9997 9.28568 21.9997 9.74974C21.9997 10.2138 21.8154 10.6588 21.4873 10.987ZM19.4214 13.052L11.4108 21.0626L8 22.0129L8.93538 18.589L16.9163 10.6081L19.4214 13.052Z"></path></svg>';const o=document.createElement("button");o.type="button",o.classList.add("btn-del-select-video","btn-delete"),o.innerHTML='<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"></circle><path d="M17.4998 7.5C17.7209 7.5 17.9328 7.5878 18.0891 7.74408C18.2454 7.90036 18.3332 8.11232 18.3332 8.33333H19.9998C20.2209 8.33333 20.4328 8.42113 20.5891 8.57741C20.7454 8.73369 20.8332 8.94565 20.8332 9.16667C20.8332 9.38768 20.7454 9.59964 20.5891 9.75592C20.4328 9.9122 20.2209 10 19.9998 10H9.99984C9.77882 10 9.56686 9.9122 9.41058 9.75592C9.2543 9.59964 9.1665 9.38768 9.1665 9.16667C9.1665 8.94565 9.2543 8.73369 9.41058 8.57741C9.56686 8.42113 9.77882 8.33333 9.99984 8.33333H11.6665C11.6665 8.11232 11.7543 7.90036 11.9106 7.74408C12.0669 7.5878 12.2788 7.5 12.4998 7.5H17.4998Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10 10.8334H20V20.8334C20 21.2754 19.8244 21.6993 19.5118 22.0119C19.1993 22.3244 18.7754 22.5 18.3333 22.5H11.6667C11.2246 22.5 10.8007 22.3244 10.4882 22.0119C10.1756 21.6993 10 21.2754 10 20.8334V10.8334ZM12.9167 12.5C12.8062 12.5 12.7002 12.5439 12.622 12.6221C12.5439 12.7002 12.5 12.8062 12.5 12.9167V20.4167C12.5 20.5272 12.5439 20.6332 12.622 20.7113C12.7002 20.7895 12.8062 20.8334 12.9167 20.8334C13.0272 20.8334 13.1332 20.7895 13.2113 20.7113C13.2894 20.6332 13.3333 20.5272 13.3333 20.4167V12.9167C13.3333 12.8062 13.2894 12.7002 13.2113 12.6221C13.1332 12.5439 13.0272 12.5 12.9167 12.5ZM17.0833 12.5C16.9728 12.5 16.8668 12.5439 16.7887 12.6221C16.7106 12.7002 16.6667 12.8062 16.6667 12.9167V20.4167C16.6667 20.5272 16.7106 20.6332 16.7887 20.7113C16.8668 20.7895 16.9728 20.8334 17.0833 20.8334C17.1938 20.8334 17.2998 20.7895 17.378 20.7113C17.4561 20.6332 17.5 20.5272 17.5 20.4167V12.9167C17.5 12.8062 17.4561 12.7002 17.378 12.6221C17.2998 12.5439 17.1938 12.5 17.0833 12.5Z" fill="currentColor"></path></svg>',e.appendChild(o),e.appendChild(i),e.insertAdjacentHTML("beforeend",'<iframe width="216" height="216" src="https://www.youtube.com/embed/'+this.input_gallery_video.value.split("/").pop()+'" title="video" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'),$(".videos-wrap")[0].appendChild(e),this.input_gallery_video.value="",$("#galleryVideoModal").modal("hide"),$(".btn-del-select-video").on("click",(function(){this.parentElement.remove()})),$(".btn-load-select-video").on("click",(function(){$(this).closest(".iframe-wrap").addClass("current"),$("#galleryEditVideoModal").modal("show"),$("#galleryEditVideoModal").find("#input_edit_gallery_video")[0].value=$(".iframe-wrap.current iframe")[0].src,$("#gallery_edit_video_form").on("submit",(function(e){e.preventDefault();const t=this.input_edit_gallery_video;t.value.length?($(".iframe-wrap.current iframe")[0].src="",$(".iframe-wrap.current iframe")[0].src="https://www.youtube.com/embed/"+this.input_edit_gallery_video.value.split("/").pop(),setTimeout(()=>{t.value="",$("#galleryEditVideoModal").modal("hide")},100),t.classList.remove("error")):t.classList.add("error")}))})),$("#galleryEditVideoModal").on("show.bs.modal",(function(){setTimeout(()=>{$("#input_edit_gallery_video").trigger("focus")},100)})),$("#galleryEditVideoModal").on("hide.bs.modal",(function(){$(".iframe-wrap.current").removeClass("current")}))}else t.classList.add("error")})),$("#formGallery").on("submit",(function(e){e.preventDefault();let t=new FormData(e.target),i={};t.forEach((function(e,t){i[t]=e})),i=JSON.stringify(i),console.log(i),$.ajax({url:"/",type:"POST",data:i,success:function(e){$("#headCrMem_3").removeAttr("style")},error:function(e){}})}));let F=$("#form_create_memorial .select-img img").length?$("#form_create_memorial .select-img img")[0].src:"";X($("#load_memorial_img"),$("#main_img")),$("#del_memorial_img").on("click",(function(e){F=this.dataset.resetImg,$("#main_img")[0].src=F,$("#load_memorial_img")[0].value="",$("#load_memorial_img")[0].setAttribute("value","")})),X($("#donl_templ"),$("#donl_templ_img"),(function e(){$('[name="templates"]').each((function(){this.checked=!1})),$('[name="templates"]:not(#donl_templ)').on("click",(function(){$("#donl_templ_img")[0].src="static/img/fake-img.png"})),$("#donl_templ").on("click",(function(){e()}))})),X($("#monument_foto"),$("#monument_foto_img")),$("#del_monument_foto").on("click",(function(e){$("#monument_foto_img")[0].src=this.dataset.resetImg,F=this.dataset.resetImg,$("#monument_foto")[0].value="",$("#monument_foto")[0].setAttribute("value","")}));const U=$("#memorial_last_name"),V=$("#memorial_name"),N=$("#memorial_surname"),I=$("#birth_day"),Z=$("#death_day"),z=$("#memorial_country"),W=$("#memorial_city");if($("#form_create_memorial").on("submit",(function(e){if(e.preventDefault(),""==U[0].value&&(U.addClass("error"),$("#"+U[0].id+" ~ .error-mess")[0].textContent="Додайте інформацію"),1===U[0].value.length&&(U.addClass("error"),$("#"+U[0].id+" ~ .error-mess")[0].textContent=" Не меньше двох символiв"),""==V[0].value&&(V.addClass("error"),$("#"+V[0].id+" ~ .error-mess")[0].textContent="Додайте інформацію"),1===V[0].value.length&&(V.addClass("error"),$("#"+V[0].id+" ~ .error-mess")[0].textContent="Не меньше двох символiв"),""==N[0].value&&(N.addClass("error"),$("#"+N[0].id+" ~ .error-mess")[0].textContent="Додайте інформацію"),1===N[0].value.length&&(N.addClass("error"),$("#"+N[0].id+" ~ .error-mess")[0].textContent="Не меньше двох символiв"),""==I[0].value&&I.addClass("error"),""==Z[0].value&&Z.addClass("error"),""==z[0].value&&z.addClass("error"),""==W[0].value&&W.addClass("error"),$("#form_create_memorial .error").length)return $("html, body").animate({scrollTop:$("#form_create_memorial .error").offset().top-$("#header").outerHeight()-20},300),!1;$("#event_birth_day")[0].value=I[0].value,$("#event_death_day")[0].value=I[0].value;let t=new FormData(e.target),i={};t.forEach((function(e,t){i[t]=e})),i=JSON.stringify(i),console.log(i),$.ajax({url:"/",type:"POST",data:i,success:function(e){$("#headCrMem_2").removeAttr("style")},error:function(e){}})})),$('#form_create_memorial [type="reset"]').on("click",(function(e){e.preventDefault(),e.target.form.reset(),e.target.form.main_img.src="static/img/no-foto.svg",e.target.form.monument_foto_img.src="static/img/no-foto.svg",e.target.form.donl_templ_img.src="static/img/fake-img.png";let t=e.target.form.querySelectorAll(".select-sort");for(let e=0;e<t.length;e++)t[e].textContent="Виберіть зі списку"})),$("#memorable_events_form").length){const e=$("#memorable_events_form"),n=e[0].memorable_event_name,a=e[0].memorable_event_decr,s=e[0].memorable_event_date_day,r=e[0].memorable_crreate_event_img_preview,l=e[0].btn_del_memorable_crreate_event_img_preview;function B(e){let t=$("#"+e),i=t[0].querySelectorAll("[data-readonly]"),o=t[0].querySelector(".select-new-img"),n=t[0].querySelector(".btn-save-edits"),a=t[0].querySelector("img.memorable-event-img"),s=t[0].querySelector(".select-new-img span"),r=t[0].querySelector(".btn-delete"),l=t[0].querySelectorAll("label[data-lab-hide]");for(let e=0;e<l.length;e++)l[e].hidden=!1;for(let e=0;e<i.length;e++)i[e].removeAttribute("readonly");o.hidden=!1,a.src.includes("fake-img")?s.textContent="Додати фото":(r.hidden=!1,s.textContent="Змiнити фото"),n.hidden=!1}function J(e){let t=$("#"+e),i=t[0].querySelector(".btn-save-edits"),o=t[0].querySelectorAll("[data-readonly]"),n=t[0].querySelector(".event-title"),a=(t[0].querySelector(".event-descr"),t[0].querySelector(".select-new-img")),s=t[0].querySelector(".btn-delete"),r=t[0].querySelectorAll("label[data-lab-hide]");for(let e=0;e<r.length;e++)r[e].hidden=!0;if(""===n.value&&n.classList.add("error"),console.log(null!==t[0].querySelector(".error")),null!==t[0].querySelector(".error"))return!1;for(let e=0;e<o.length;e++)o[e].setAttribute("readonly","");a.hidden=!0,s.hidden=!0,i.hidden=!0}function P(e){$(".select-new-img[data-event-block="+e+"] span")[0].textContent="Додати фото",$(".btn-remove-event-img[data-event-block="+e+"]")[0].hidden=!0,$("img[data-event-block="+e+"]")[0].setAttribute("src","static/img/fake-img.png")}function G(e){$("#"+e)[0].remove()}e.on("submit",(function(e){e.preventDefault();let t=new FormData(e.target),i={};t.forEach((function(e,t){i[t]=e})),i=JSON.stringify(i),$.ajax({url:"/",type:"POST",data:i,success:function(e){$("#donateModal").modal("show"),setTimeout(()=>{$("#donateModal").modal("hide")},5e3)},error:function(e){}})})),X($("#memorable_crreate_event_img"),$("#memorable_crreate_event_img_preview"),(function(){$("[for=memorable_crreate_event_img] span")[0].textContent="Завантажити iнше фото",$("#btn_del_memorable_crreate_event_img_preview")[0].hidden=!1})),$("#btn_del_memorable_crreate_event_img_preview").on("click",(function(){$("#memorable_crreate_event_img_preview")[0].setAttribute("src","static/img/fake-img.png"),$("[for=memorable_crreate_event_img] span")[0].textContent="Завантажити фото",this.hidden=!0})),$("#btn_memorable_events").on("click",(function(){let e=$("#event_template")[0].cloneNode(!0),d="event_"+Date.now();["id","hidden"].forEach(t=>e.removeAttribute(t)),e.id=d;for(let t=0;t<e.querySelectorAll("[data-event-block]").length;t++)e.querySelectorAll("[data-event-block]")[t].dataset.eventBlock=d;function c(t,i,o){e.querySelector(t).addEventListener([i],(function(){o(this.dataset.eventBlock)}))}function m(t,i,o){e.querySelector(t)[i]=o}if(c(".btn-edit-event","click",B),c(".btn-save-edits","click",J),c(".btn-remove-event","click",G),c(".btn-remove-event-img","click",P),m("img","src",r.src),""===n.value&&n.classList.add("error"),""===s.value&&s.classList.add("error"),$("#memorable_events_form .error").length)return!1;var h,u,f,p;m(".event-title","value",n.value),m(".event-descr","value",a.value),m(".event-date","value",s.value),n.value="",a.value="",setTimeout(()=>{Y()},100),s.value="",r.src="static/img/fake-img.png",l.hidden=!0,$("[for=memorable_crreate_event_img] span")[0].textContent="Завантажити фото",$("#events_wrap").append(e),h=e.querySelector("[type=file]"),u=e.querySelector("img.memorable-event-img"),f=e.querySelector(".btn-remove-event-img"),p=e.querySelector(".select-new-img span"),h.addEventListener("change",(function(){if(this.files&&this.files[0]){let e=this.files[0],n=(this.files[0].size/1048576).toFixed(2),a=this.files[0].name.split(".").pop(),s=!1,r=window.URL||window.webkitURL,l=new Image,d=new FileReader;if(!o.includes(a))return $("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+a+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),s=!1,h.value="",!1;l.onload=function(){t=this.width,i=this.height,t<150||i<150?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Занадто маленьке зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Miнiмальний розмiр (150px x 150px)",s=!1,h.value=""):t>1e3||i>1e3?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр (1000px x 1000px)",s=!1,h.value=""):n>1?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення - "+n+"мб",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр - <b>1мб</b>",s=!1,h.value=""):o.includes(a)?s=!0:($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+a+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),s=!1,h.value=""),s&&(d.onload=function(e){F=e.target.result,u.src=F,f.hidden=!1,p.textContent="Змiнити фото"},d.readAsDataURL(e))},l.src=r.createObjectURL(this.files[0])}})),setTimeout(()=>{w(e.querySelector(".event-date"))},100),e.querySelector(".event-date").onfocus=function(){this.blur()},e.querySelector("input").onfocus=function(){this.classList.remove("error")},e.querySelector("textarea").onfocus=function(){this.classList.remove("error")}}))}function X(e,n,a){let s="";void 0!==e[0]&&e[0].addEventListener("change",(function(){if(this.files&&this.files[0]){let r=this.files[0],l=(this.files[0].size/1048576).toFixed(2),d=this.files[0].name.split(".").pop(),c=!1,m=window.URL||window.webkitURL,h=new Image,u=new FileReader;if(!o.includes(d))return $("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+d+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),c=!1,e.val(""),!1;h.onload=function(){t=this.width,i=this.height,t<150||i<150?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Занадто маленьке зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Miнiмальний розмiр (150px x 150px)",c=!1,e.val("")):t>1e3||i>1e3?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр (1000px x 1000px)",c=!1,e.val("")):l>1?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення - "+l+"мб",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр - <b>1мб</b>",c=!1,e.val("")):o.includes(d)?c=!0:($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+d+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),c=!1,e.val("")),c&&(u.onload=function(e){s=e.target.result,n[0].src=s,a&&a()},u.readAsDataURL(r))},h.src=m.createObjectURL(this.files[0])}}))}function Y(){$("textarea[maxlength]").each((function(){$(this).next(".textarea-maxlength").length&&$(this).next(".textarea-maxlength").text($(this).val().length+"/"+$(this)[0].getAttribute("maxlength"))})),$("textarea[maxlength]").on("input",(function(){$(this).next(".textarea-maxlength").text($(this).val().length+"/"+$(this)[0].getAttribute("maxlength")),$(this).scrollTop($(this)[0].scrollHeight)}))}if($(".pass-show").on("click",(function(){let e=$(this)[0].parentNode.querySelector("input"),t=$(this).find(".eye-slash")[0];"password"===e.type?e.type=t.setAttribute("hidden",""):(e.type="password")&&t.removeAttribute("hidden")})),$("#btn_logout").on("click",(function(e){e.preventDefault(),location.href="login.html",localStorage.login=!1})),"true"===localStorage.login&&($("#page").addClass("IS_LOG_IN"),$("a").each((function(){this.href.includes("login.html")&&!$(this).hasClass("btn-user-login")&&(this.href="user-cabinet-management.html")}))),$('input:not([type="checkbox"], [type="radio"], [type="submit"])').each((function(){this.setAttribute("autocomplete","off")})),Y(),$("textarea, input").on("focus",(function(){$(this).removeClass("error")})),$("[contenteditable]").on("keyup",(function(){const e=$(this)[0].getAttribute("data-input-id");$("#"+e).val($(this).text()),""===$("#"+e).val()?$(this).removeClass("active"):$(this).addClass("active")})),$(".auto-h").on("keyup",(function(){this.style.height="1px",this.style.height=this.scrollHeight+"px"})),$("#complain_form").on("submit",(function(e){e.preventDefault(),$("#sucsesModalLabel").text("Дякуємо, Ваше повідомлення надіслано"),setTimeout((function(){$("#complainModal").modal("hide"),$("#sucsesModal").modal("show"),setTimeout((function(){$("#sucsesModal").modal("hide")}),5e3)}),1e3)})),$("#send_message_form").on("submit",(function(e){e.preventDefault(),$("#sucsesModalLabel").text("Повідомлення відправлено"),setTimeout((function(){$("#sendMessageModal").modal("hide"),$("#sucsesModal").modal("show"),setTimeout((function(){$("#sucsesModal").modal("hide")}),5e3)}),1e3)})),$("#comments_form").on("submit",(function(e){e.preventDefault()})),$("#comment_add_foto").on("change",(function(e){if(this.files&&this.files[0]){let e=this.files[0],n=(this.files[0].size/1048576).toFixed(2),a=this.files[0].name.split(".").pop(),s=!1,r=window.URL||window.webkitURL,l=new Image,d=new FileReader;if(!o.includes(a))return $("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+a+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),s=!1,$("#comment_add_foto").val(""),!1;l.onload=function(){t=this.width,i=this.height,t<150||i<150?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Занадто маленьке зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Miнiмальний розмiр (150px x 150px)",s=!1,$("#comment_add_foto").val("")):t>1e3||i>1e3?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення <br> ("+t+"px x "+i+"px)",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр (1000px x 1000px)",s=!1,$("#comment_add_foto").val("")):n>1?($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="Надто велике зображення - "+n+"мб",$("#infoModal .modal-body")[0].innerHTML="Mаксимальний розмiр - <b>1мб</b>",s=!1,$("#comment_add_foto").val("")):o.includes(a)?s=!0:($("#infoModal").modal("show"),$("#infoModal .modal-title")[0].innerHTML="."+a+" - неприпустимий формат файлу",$("#infoModal .modal-body")[0].innerHTML="Формат має бути - "+o.join(", "),s=!1,$("#comment_add_foto").val("")),s&&(d.onload=function(e){$("#comments_form .label-add-foto")[0].classList.add("active"),$("#comments_form .label-add-foto")[0].style.backgroundImage="url("+e.target.result+")"},d.readAsDataURL(e))},l.src=r.createObjectURL(this.files[0])}})),$(".label-add-foto.active").on("click",(function(e){e.preventDefault()})),$(".btn-remove-img").on("click",(function(e){e.preventDefault();const t=$(this)[0].parentElement.parentElement,i=t.getAttribute("for");$("#"+i).val(""),t.classList.remove("active"),$(".label-add-foto")[0].style.backgroundImage="none"})),$(".form-to-comments").on("submit",(function(e){e.preventDefault()})),$("label[for]").on("click",(function(){const e=$('[data-input-id="'+this.getAttribute("for")+'"]');0!=e.length&&e.focus()})),$("#contact_us_form").on("submit",(function(e){let t;if(e.preventDefault(),$(this).find("input, option, textarea").not("[type=submit]").each((function(){t=$(this).attr("id");let e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if("name"===t&&(""!==$(this).val()?$(this).removeClass("error"):$(this).addClass("error")),"email"===t&&(""==$(this).val()?($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Вкажіть email"):$(this).val().includes("@")?/[а-яА-ЯЪъЫыЭэЁё]/i.test($(this).val())?($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Не можна писати кирилицею"):$(this).val().length>320?($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Не можна бiльше 320 символiв"):e.test($(this).val())&&""!=$(this).val()?$(this).removeClass("error"):($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent="Перевірте E-mail"):($(this).addClass("error"),$("#"+t+" ~ .error-mess")[0].textContent='Пропущено "@"')),"message_subject"===t&&("none"===$(this).val()||""===$(this).val())){let e=$("#contact_us_form .site-dropdown-select li")[0].textContent;$("#contact_us_form .select-sort")[0].textContent=e,$(this).val(e)}"text"===t&&(""==$(this).val()?$(this).addClass("error"):$(this).removeClass("error"))})),$("#contact_us_form .error").length)return $("html, body").animate({scrollTop:$("#contact_us_form .error").offset().top-$("#header").outerHeight()-20},300),!1;let i=new FormData(e.target),o={};i.forEach((function(e,t){o[t]=e})),o=JSON.stringify(o),$.ajax({url:"/",type:"POST",data:o,success:function(e){$("#sucsesModalLabel").text("Ваше повідомлення успішно надіслано. Ми спробуємо зв'язатися з Вами якнайшвидше!"),setTimeout((function(){$("#contact_us_form").find("input, option, textarea").not("[type=submit]").each((function(){$(this).val("").text("")})),$('[data-dropdown-id="message_subject"]').removeClass("in-active"),$('[data-dropdown-id="message_subject"] .select-sort').text("Оберіть певну тему"),$("#sendMessageModal").modal("hide"),$("#sucsesModal").modal("show"),setTimeout((function(){$("#sucsesModal").modal("hide")}),5e3)}),1e3)},error:function(e){}})})),0!==$(".donate").length){const e=$(".pay-period-warn")[0],t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,i={pay_amount:!1,email:!1,card_num:!1,card_date:!1,card_cvc:!1};let o=0;function K(){return Object.keys(i).filter((function(e){return!i[e]})).length}function Q(e){!0===e&&($(".type-period").each((function(){this.removeAttribute("hidden")})),0===$('[type="radio"][name="sum"]:not(#pay_enother):checked').length&&$('[for="pay_1"]').trigger("click")),!1===e&&($(".type-period").each((function(){this.setAttribute("hidden","")})),$('[for="pay_enother"]').trigger("click"))}function ee(e,t){$(".type-curency").each((function(){this.innerText=e})),$(".input-curency")[0].innerText=t}function te(e){switch(e){case"pay_usd":ee("USD","$");break;case"pay_eur":ee("EUR","€");break;case"pay_uah":ee("грн","₴")}}function ie(e){e?$("#donate_submit")[0].removeAttribute("disabled"):$("#donate_submit")[0].setAttribute("disabled","")}function oe(){$("#pay_enother")[0].checked?""==$(this).val()?($(this).addClass("error"),i.pay_amount=!1,$("#formCard")[0].hidden=!0,$("#donate_submit")[0].removeAttribute("disabled")):($(this).removeClass("error"),i.pay_amount=!0,!1===i.email&&($("#formCard")[0].hidden=!0)):i.pay_amount=!0}function ne(){""==$(this).val()?($(this).addClass("error"),$("#"+this.id+" ~ .error-mess")[0].textContent="Вкажіть email",i.email=!1):$(this).val().includes("@")?/[а-яА-ЯЪъЫыЭэЁё]/i.test($(this).val())?($(this).addClass("error"),$("#"+this.id+" ~ .error-mess")[0].textContent="Не можна писати кирилицею",i.email=!1):$(this).val().length>320?($(this).addClass("error"),$("#"+this.id+" ~ .error-mess")[0].textContent="Не можна бiльше 320 символiв",i.email=!1):t.test($(this).val())?($(this).removeClass("error"),i.email=!0):($(this).addClass("error"),$("#"+this.id+" ~ .error-mess")[0].textContent="Перевірте E-mail",i.email=!1):($(this).addClass("error"),$("#"+this.id+" ~ .error-mess")[0].textContent='Пропущено "@"',i.email=!1)}function ae(e){var t=e.keyCode;-1===[8].indexOf(t)&&(e.target.value=e.target.value.replace(/^([1-9]\/|[2-9])$/g,"0$1/").replace(/^(0[1-9]|1[0-2])$/g,"$1/").replace(/^([0-1])([3-9])$/g,"0$1/$2").replace(/^(0?[1-9]|1[0-2])([0-9]{2})$/g,"$1/$2").replace(/^([0]+)\/|[0]+$/g,"0").replace(/[^\d\/]|^[\/]*$/g,"").replace(/\/\//g,"/"))}Q($("#pay_monthly")[0].checked),$("#pay_monthly")[0].checked?e.removeAttribute("hidden"):e.setAttribute("hidden",""),$("#pay_monthly, #pay_once").on("change",(function(){$("#pay_monthly")[0].checked?e.removeAttribute("hidden"):e.setAttribute("hidden",""),Q($("#pay_monthly")[0].checked)})),$("[name=currency]").on("change",(function(){te(this.id)})),$('[type="radio"][name="sum"]:not(#pay_enother)').on("change",(function(){o=this.value})),$("#pay_enother").on("change",(function(){o=$("#payEnother")[0].value})),$("#payEnother").on("input",(function(){let e=this.value.replace(/[^0-9]/g,"");e=e.startsWith("0")?e.slice(1):e,this.value=e,o=e,oe.call(this)})),$("#email").on("focus",(function(){$(this).on("input",(function(){t.test($(this).val())&&""!=$(this).val()?(i.email=!0,!1===i.pay_amount&&($("#formCard")[0].hidden=!0)):(i.email=!1,$("#formCard")[0].hidden=!0,$("#donate_submit")[0].removeAttribute("disabled"))}))})),$("#card_num").on("focus",(function(){$(this).on("input",(function(){let e=this.value.replace(/[^0-9\d]/g,"").substring(0,16);e=""!=e?e.match(/.{1,4}/g).join(" "):"",this.value=e,""==$(this).val()||19!==$(this).val().length?i.card_num=!1:i.card_num=!0,0===K()?ie(1):ie(0)})),$(this).on("blur",(function(){""==$(this).val()||19!==$(this).val().length?($(this).addClass("error"),i.card_num=!1):($(this).removeClass("error"),i.card_num=!0)}))})),$("#card_date").on("focus",(function(){$(this).on("keyup",(function(e){ae(e)})),$(this).on("keydown",(function(e){ae(e)})),$(this).on("input",(function(e){let t=this.value.replace(/[^0-9]/g,"");t=""!=t?t.match(/.{1,2}/g).join("/"):"",this.value=t,""==$(this).val()||5!==$(this).val().length?i.card_date=!1:i.card_date=!0,0===K()?ie(1):ie(0)})),$(this).on("blur",(function(){""==$(this).val()||5!==$(this).val().length?($(this).addClass("error"),i.card_date=!1):($(this).removeClass("error"),i.card_date=!0)}))})),$("#card_cvc").on("focus",(function(){$(this).on("input",(function(){this.value=this.value.replace(/[^0-9]/g,""),""==$(this).val()||3!==$(this).val().length?i.card_cvc=!1:i.card_cvc=!0,0===K()?ie(1):ie(0)})),$(this).on("blur",(function(){""==$(this).val()||3!==$(this).val().length?($(this).addClass("error"),i.card_cvc=!1):($(this).removeClass("error"),i.card_cvc=!0)}))})),$("#donateForm").on("submit",(function(e){e.preventDefault();const t=this;if($(this).find("input").not("[type=submit]").each((function(){let e=$(this).attr("id");"payEnother"===e&&oe.call(this),"email"===e&&ne.call(this)})),!0===i.pay_amount&&!0===i.email&&($("#formCard")[0].hidden=!1,0===K()?ie(1):ie(0)),0===K()){let e=$(this).serializeArray();$.ajax({url:"/",type:"POST",data:e,success:function(e){$(".load-block .pay-success")[0].hidden||($(".load-block .pay-success")[0].hidden=!0),$(".load-block")[0].hidden=!1,$(".load-block .pay-in-process")[0].hidden=!1,$("#you_paid_amount")[0].innerText=o,$(".success-type-curency")[0].innerText=$(".type-curency")[0].textContent,ie(0),setTimeout((function(){$(".load-block .pay-in-process")[0].hidden=!0,$(".load-block .pay-success")[0].hidden=!1,t.reset(),te($("[name=currency]:checked")[0].id)}),3e3)},error:function(e){}})}}))}$("#del_account_form").on("submit",(function(e){e.preventDefault(),""===this.message_text.value?this.message_text.classList.add("error"):this.message_text.classList.remove("error"),setTimeout(function(){0===$(this).find(".error").length&&($("#delAccModal").modal("hide"),$("#delAccAlert").modal("show"))}.bind(this),100)})),$("#confirm_remove").on("change",(function(e){this.checked?this.form.setAttribute("disabled",!1):this.form.setAttribute("disabled",!0)})),$('#del_account_form [type="reset"]').on("click",(function(){this.form.setAttribute("disabled",!0),this.form.reset()})),$(".btn-answer-mess").on("click",(function(){$(this).hasClass("answer")||($("#sendMessageModal_2").modal("show"),le.call(this))}));let se="",re="";function le(){se=this,re=$(se.dataset.messBlock)[0]}$("#send_message_form_2").on("submit",(function(e){e.preventDefault();let t=this.message_text,i=$(this).find('[type="submit"]');if(""===t.value&&(t.classList.add("error"),i.css("margin-top","10px")),$(this).find(".error").length)return!1;i.css("pointer-events","none"),$("#sucsesModalLabel").text("Відповідь відправлено"),setTimeout((function(){$("#sendMessageModal_2").modal("hide"),re.insertAdjacentHTML("afterend",`\n\t      <div class="message-block">\n\t        <div class="message-header">\n\t          <div class="img-wrap">\n\t            <img width="40" height="40" src="static/img/memorials/no-photo.jpg" alt="">\n\t          </div>\n\t          <div class="name h6">Ваша відповідь</div>\n\t        </div>\n\t        <div class="message-body">\n\t          <div class="message-text">\n\t            <p>${t.value}</p>\n\t          </div>\n\t        </div>\n\t        <div class="date-time">дд.мм.рррр 12:00</div>\n\t      </div>\n\t    `),t.value="",$("#sucsesModal").modal("show"),se.dataset.title="Ви відповіли",se.classList.add("answer"),setTimeout((function(){$("#sucsesModal").modal("hide"),i.css("pointer-events","auto")}),3e3)}),1e3)}))};